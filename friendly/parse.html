<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="nlparse.js"></script>
</head>
<body>
  <h2>Rules</h2>
  <select id="rules">
    <option value="en.json">English</option>
  </select>
  <h2>Nodes</h2>
  <textarea id="nodes">[{"thisisa":"node","type":"article", "definite":false},{"thisisa":"node", "type":"noun","is":"hair"}]</textarea>
  <button onclick="main();">GO</button>
  <h2>Output</h2>
  <textarea id="out"></textarea>
  <script>
  var langs = {};
  var getlang = function(lang, fn) {
    if (langs.hasOwnProperty(lang)) {
      fn(langs[lang]);
    } else {
      $.getJSON(lang, fn);
    }
  }
  var parse = function() {
    var rules = JSON.parse($('#rules').val()).syntax;
    var nodes = JSON.parse($('#nodes').val());
    $('#out').val(JSON.stringify(dosyntax(nodes, rules)));
  }
  var main = function() {
    var lang = $('#rules').val();
    var nodes = JSON.parse($('#nodes').val());
    getlang(lang, function(rules) {$('#out').val(JSON.stringify(dosyntax(nodes, rules.syntax)));});
  }
  </script>
</body>
</html>
